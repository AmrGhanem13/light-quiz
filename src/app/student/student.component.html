<!-- <div *ngIf="isPageBlurred"
  class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center text-white text-2xl font-bold">
  Please return to the exam tab
</div> -->
<div *ngIf="isSubmittedSuccessfully" class="fixed inset-0 z-50 bg-white bg-opacity-90 flex items-center justify-center">
  <div class="bg-green-100 border border-green-400 text-green-700 px-8 py-6 rounded-xl shadow-lg text-center space-y-4">
    <h2 class="text-3xl font-bold">‚úÖ Quiz Submitted!</h2>
    <p class="text-xl">Your answers have been successfully submitted. Good luck! üçÄ</p>
    <button (click)="goToDashboard()"
      class="mt-4 bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition">
      Return to Dashboard
    </button>
  </div>
</div>
<div appNoCopy class="max-w-4xl mx-auto p-4 space-y-6">
  <!-- Timer -->
  <div [ngClass]="getProgressColor()" class="p-4 rounded-xl shadow space-y-2">
    <div class="flex justify-between items-center">
      <h2 class="text-2xl font-bold">{{ quiz?.title }}</h2>
      <div class="text-lg font-semibold ">Time Remaining: {{ minutes }} min : {{ seconds }} sec</div>
    </div>
    <div class="w-full bg-green-200 rounded-full h-3 overflow-hidden">
      <div class="bg-green-600 h-3 transition-all duration-300" [style.width.%]="getProgress()"></div>
    </div>
  </div>

  <!-- Description -->
  <p class="text-gray-700 text-lg italic">{{ quiz?.description }}</p>

  <!-- Questions -->
  <form (ngSubmit)="submitQuiz()" #quizForm="ngForm" class="space-y-8">
    <div *ngFor="let question of quiz?.questions; let i = index" class="p-6 rounded-xl shadow-md bg-white">
      <div class="flex justify-between items-center mb-4">
        <p class="text-lg font-semibold">Question #{{ i + 1 }}: {{ question.text }}</p>
        <span class="text-green-600 ">({{ question.points }} points)</span>
      </div>

      <!-- MCQ -->
      <div *ngIf="question.typeId === 1 || question.typeId === 2" class="space-y-3">
        <div *ngFor="let option of question.options" class="flex items-center gap-3">
          <input [id]="'q' + question.questionId + option.optionLetter" type="radio" name="q{{question.questionId}}"
            [(ngModel)]="answers[question.questionId]" [value]="option.optionLetter" class="accent-green-600 w-5 h-5"
            required />
          <label [for]="'q' + question.questionId + option.optionLetter" class="text-gray-800 cursor-pointer">{{
            option.optionText }}</label>
        </div>
      </div>

      <!-- Essay -->
      <div *ngIf="question.typeId === 3">
        <textarea [(ngModel)]="answers[question.questionId]" name="q{{question.questionId}}" rows="3" required
          class="w-full p-3 border border-green-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 resize-none"></textarea>
      </div>
    </div>

    <!-- Submit -->
    <div class="text-center">
      <button type="submit"
        class="bg-green-600 cursor-pointer text-white px-8 py-3 rounded-lg text-lg hover:bg-green-700 transition">
        Submit Answers
      </button>
    </div>
  </form>
</div>